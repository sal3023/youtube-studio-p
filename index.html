<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ù…Ù†ØµØ© Ù†Ø´Ø± ØªÙ‚Ù†ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© ØªØ¹Ù…Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ">
    <title>Cyberia Publisher | Ø§Ù„Ù†Ø§Ø´Ø± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;800&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg: #0f172a;
            --panel: #1e293b;
            --primary: #3b82f6; /* Ø£Ø²Ø±Ù‚ Ø¬ÙˆØ¬Ù„ Ø§Ù„Ø±Ø³Ù…ÙŠ */
            --accent: #10b981; /* Ø£Ø®Ø¶Ø± Ø§Ù„Ù‚Ø¨ÙˆÙ„ */
            --text: #f8fafc;
            --text-dim: #94a3b8;
            --border: #334155;
        }

        * { margin:0; padding:0; box-sizing:border-box; outline:none; font-family:'Tajawal', sans-serif; }
        body { background: var(--bg); color: var(--text); min-height: 100vh; display: flex; flex-direction: column; overflow-x: hidden; }

        /* Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .app-container { display: flex; flex: 1; }
        
        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
        .sidebar {
            width: 250px; background: var(--panel); border-left: 1px solid var(--border);
            padding: 20px; display: flex; flex-direction: column;
        }
        .brand { font-size: 22px; font-weight: 800; color: var(--text); margin-bottom: 40px; display: flex; align-items: center; gap: 10px; }
        .brand span { color: var(--primary); }
        
        .menu-item {
            padding: 12px; margin-bottom: 8px; border-radius: 8px; color: var(--text-dim); cursor: pointer;
            display: flex; align-items: center; gap: 12px; transition: 0.2s; font-size: 14px;
        }
        .menu-item:hover, .menu-item.active { background: rgba(59, 130, 246, 0.1); color: var(--primary); }
        
        /* Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        .legal-menu { margin-top: auto; border-top: 1px solid var(--border); padding-top: 15px; }
        .legal-item { font-size: 12px; color: #64748b; padding: 8px; cursor: pointer; }
        .legal-item:hover { color: var(--text); }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .main { flex: 1; padding: 30px; overflow-y: auto; }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 25px; margin-bottom: 25px; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 15px; }
        .card-title { font-size: 18px; font-weight: bold; }

        /* Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (AdSense Placeholders) */
        .ad-unit {
            width: 100%; height: 100px; background: repeating-linear-gradient(45deg, #1e293b, #1e293b 10px, #253146 10px, #253146 20px);
            border: 1px dashed #475569; border-radius: 8px; display: flex; align-items: center; justify-content: center;
            color: #64748b; font-size: 12px; margin-bottom: 20px; text-transform: uppercase;
        }

        /* Ø§Ù„Ù…Ø­Ø±Ø± */
        input[type="text"], textarea {
            width: 100%; background: #0f172a; border: 1px solid var(--border); padding: 15px; border-radius: 8px;
            color: var(--text); margin-bottom: 15px; font-family: 'Cairo'; line-height: 1.6;
        }
        input:focus, textarea:focus { border-color: var(--primary); }
        textarea { height: 300px; resize: vertical; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .btn {
            padding: 12px 24px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; transition: 0.2s;
            display: inline-flex; align-items: center; gap: 8px; font-size: 14px;
        }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: #2563eb; }
        .btn-success { background: var(--accent); color: white; }
        .btn-success:hover { background: #059669; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ÙƒÙˆÙƒÙŠØ² */
        .cookie-banner {
            position: fixed; bottom: 0; left: 0; width: 100%; background: #1e293b; border-top: 1px solid var(--border);
            padding: 15px; display: flex; justify-content: space-between; align-items: center; z-index: 999;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3); display: none; /* ÙŠØ¸Ù‡Ø± Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª */
        }
        .cookie-text { font-size: 12px; color: var(--text-dim); max-width: 80%; }

        /* Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© (Modal) */
        .modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1000; display: none;
            align-items: center; justify-content: center;
        }
        .modal-content {
            background: var(--panel); width: 600px; max-height: 80vh; overflow-y: auto; padding: 30px;
            border-radius: 12px; border: 1px solid var(--border);
        }

        @media (max-width: 768px) {
            .app-container { flex-direction: column; }
            .sidebar { width: 100%; flex-direction: row; overflow-x: auto; padding: 10px; border-bottom: 1px solid var(--border); border-left: none; }
            .main { padding: 15px; }
            .menu-item span { display: none; }
            .menu-item i { font-size: 18px; }
        }
    </style>
</head>
<body>

<div class="modal" id="setup-modal" style="display:flex;">
    <div class="modal-content" style="width: 400px; text-align: center;">
        <h2 style="margin-bottom:10px; color:var(--primary);">Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø§Ø´Ø± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯</h2>
        <p style="font-size:12px; color:var(--text-dim); margin-bottom:20px;">Ù„Ø¶Ù…Ø§Ù† Ù‚Ø¨ÙˆÙ„ AdSenseØŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</p>
        
        <input type="text" id="site-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹/Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Ù…Ø«Ø§Ù„: ØªÙ‚Ù†ÙŠØ© Ø¨Ø±Ùˆ)">
        <input type="email" id="contact-email" placeholder="Ø¨Ø±ÙŠØ¯ Ø§Ù„ØªÙˆØ§ØµÙ„ (Ù„Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©)">
        
        <hr style="border:0; border-top:1px solid var(--border); margin:15px 0;">
        
        <input type="text" id="client-id" placeholder="Google Client ID">
        <input type="password" id="ai-key" placeholder="Gemini API Key">
        <input type="text" id="blog-id" placeholder="Blog ID">
        
        <button class="btn btn-primary" style="width:100%; justify-content:center;" onclick="saveSetup()">Ø­ÙØ¸ ÙˆØ¨Ø¯Ø¡ Ø§Ù„Ø¹Ù…Ù„</button>
    </div>
</div>

<div class="app-container">
    <div class="sidebar">
        <div class="brand"><i class="fa-brands fa-google"></i> <span>Publisher</span></div>
        <div class="menu-item active" onclick="showSection('writer')"><i class="fa-solid fa-pen-nib"></i> <span>Ù…Ø­Ø±Ø± Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</span></div>
        <div class="menu-item" onclick="showSection('ads')"><i class="fa-solid fa-dollar-sign"></i> <span>ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</span></div>
        
        <div class="legal-menu">
            <div class="legal-item" style="color:var(--text); font-weight:bold; margin-bottom:5px;">Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©:</div>
            <div class="legal-item" onclick="generateLegal('privacy')">ğŸ“„ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</div>
            <div class="legal-item" onclick="generateLegal('terms')">ğŸ“œ Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</div>
            <div class="legal-item" onclick="generateLegal('contact')">ğŸ“§ Ø§ØªØµÙ„ Ø¨Ù†Ø§</div>
        </div>
    </div>

    <div class="main">
        
        <div class="ad-unit">Top Leaderboard Ad (728x90)</div>

        <div id="writer-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">âœï¸ ÙƒØ§ØªØ¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ SEO</div>
                    <div style="font-size:12px; color:var(--accent);"><i class="fa-solid fa-check-circle"></i> AdSense Friendly</div>
                </div>
                
                <input type="text" id="topic" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„ (Ù…Ø«Ù„Ø§Ù‹: Ø§Ù„Ø±Ø¨Ø­ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª 2024)">
                <button class="btn btn-primary" onclick="generateSafeContent()">
                    <i class="fa-solid fa-wand-magic-sparkles"></i> ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø³ÙˆØ¯Ø©
                </button>
            </div>

            <div class="card" id="editor-card" style="display:none;">
                <div class="card-header">
                    <div class="card-title">ğŸ“ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ù„ØªØ­Ø±ÙŠØ±</div>
                    <button class="btn btn-success" onclick="publishToBlogger()">
                        <i class="fa-brands fa-blogger"></i> Ù†Ø´Ø± Ù†Ù‡Ø§Ø¦ÙŠ
                    </button>
                </div>
                <p style="font-size:12px; color:var(--text-dim); margin-bottom:10px;">* Ù†ØµÙŠØ­Ø© AdSense: Ù‚Ù… Ø¨Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù‚Ø§Ù„ ÙˆØªØ¹Ø¯ÙŠÙ„Ù‡ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„ÙŠØµØ¨Ø­ ÙØ±ÙŠØ¯Ø§Ù‹ 100%.</p>
                <input type="text" id="final-title">
                <textarea id="final-content"></textarea>
            </div>
        </div>

        <div id="legal-display" class="card" style="display:none;">
            <div class="card-header">
                <div class="card-title" id="legal-title"></div>
                <button class="btn btn-primary" onclick="copyLegal()">Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯</button>
            </div>
            <textarea id="legal-content" style="height:400px; font-family:monospace; font-size:12px;"></textarea>
        </div>

        <div class="ad-unit">Bottom Banner Ad (Responsive)</div>
    </div>
</div>

<div class="cookie-banner" id="cookie-banner">
    <div class="cookie-text">
        ğŸª Ù†Ø³ØªØ®Ø¯Ù… Ù…Ù„ÙØ§Øª ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø· Ù„Ø¶Ù…Ø§Ù† Ø£ÙØ¶Ù„ ØªØ¬Ø±Ø¨Ø© Ù„Ùƒ ÙˆÙ„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©.
    </div>
    <button class="btn btn-success" onclick="acceptCookies()">Ù…ÙˆØ§ÙÙ‚</button>
</div>

<script>
    let token = "";

    window.onload = () => {
        // ÙØ­Øµ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        if(localStorage.getItem("cid") && localStorage.getItem("siteName")) {
            document.getElementById("setup-modal").style.display = "none";
            document.getElementById("cookie-banner").style.display = "flex"; // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙƒÙˆÙƒÙŠØ²
            
            // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø®ÙÙŠØ©
            document.getElementById("client-id").value = localStorage.getItem("cid");
            document.getElementById("ai-key").value = localStorage.getItem("akey");
            document.getElementById("blog-id").value = localStorage.getItem("blogId");
        }

        const params = new URLSearchParams(window.location.hash.substring(1));
        if (params.has("access_token")) {
            token = params.get("access_token");
            document.getElementById("setup-modal").style.display = "none";
        }
    };

    function saveSetup() {
        const name = document.getElementById("site-name").value;
        const email = document.getElementById("contact-email").value;
        const cid = document.getElementById("client-id").value;
        const key = document.getElementById("ai-key").value;
        const bid = document.getElementById("blog-id").value;

        if(name && email && cid && key && bid) {
            localStorage.setItem("siteName", name);
            localStorage.setItem("contactEmail", email);
            localStorage.setItem("cid", cid);
            localStorage.setItem("akey", key);
            localStorage.setItem("blogId", bid);
            authenticate();
        } else alert("Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ù‚Ø¨ÙˆÙ„ ÙÙŠ AdSense");
    }

    function authenticate() {
        const cid = localStorage.getItem("cid");
        const redirect = window.location.href.split('?')[0].replace(/\/$/, "");
        const scope = "https://www.googleapis.com/auth/blogger";
        window.location.href = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${cid}&redirect_uri=${redirect}&response_type=token&scope=${scope}&include_granted_scopes=true&state=pass`;
    }

    function acceptCookies() {
        document.getElementById("cookie-banner").style.display = "none";
        localStorage.setItem("cookiesAccepted", "true");
    }

    // --- ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© (Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ Ù„Ù„Ù‚Ø¨ÙˆÙ„) ---
    function generateLegal(type) {
        document.getElementById("writer-section").style.display = "none";
        document.getElementById("legal-display").style.display = "block";
        
        const siteName = localStorage.getItem("siteName") || "Ù…ÙˆÙ‚Ø¹ÙŠ";
        const email = localStorage.getItem("contactEmail") || "email@example.com";
        const date = new Date().toLocaleDateString('ar-EG');
        
        let title = "", content = "";

        if(type === 'privacy') {
            title = "Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©";
            content = `<h1>Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ù„Ù€ ${siteName}</h1>
<p>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ­Ø¯ÙŠØ«: ${date}</p>
<p>Ù†Ø­Ù† ÙÙŠ <strong>${siteName}</strong> Ù†ÙˆÙ„ÙŠ Ø§Ù‡ØªÙ…Ø§Ù…Ø§Ù‹ ÙƒØ¨ÙŠØ±Ø§Ù‹ Ù„Ø®ØµÙˆØµÙŠØ© Ø²ÙˆØ§Ø±Ù†Ø§. ØªÙˆØ¬Ø² Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„ØªÙŠ Ù†Ø¬Ù…Ø¹Ù‡Ø§ ÙˆÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§.</p>
<h3>Ù…Ù„ÙØ§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ (Log Files)</h3>
<p>Ù…Ø«Ù„ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø¹Ù„Ù‰ Ø´Ø¨ÙƒØ© Ø§Ù„Ø§Ù†ØªØ±Ù†ØªØŒ ÙŠØ³ØªØ®Ø¯Ù… Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ù…Ù„ÙØ§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„. Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¯Ø§Ø®Ù„ Ù…Ù„ÙØ§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªØ´Ù…Ù„: Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª (IP)ØŒ Ù†ÙˆØ¹ Ø§Ù„Ù…ØªØµÙØ­ØŒ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©ØŒ ÙˆØªØ§Ø±ÙŠØ®/ÙˆÙ‚Øª Ø§Ù„Ø²ÙŠØ§Ø±Ø©.</p>
<h3>Ù…Ù„ÙØ§Øª ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø· (Cookies) ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ©</h3>
<p>Ù†Ø­Ù† Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒÙˆÙƒÙŠØ² Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø²ÙˆØ§Ø±. Ø¬ÙˆØ¬Ù„ØŒ ÙƒØ·Ø±Ù Ø«Ø§Ù„Ø«ØŒ ØªØ³ØªØ®Ø¯Ù… Ø§Ù„ÙƒÙˆÙƒÙŠØ² Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ù†Ø§.</p>
<h3>Ù„Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø§</h3>
<p>Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±ØŒ ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø³Ù„ØªÙ†Ø§ Ø¹Ø¨Ø±: ${email}</p>`;
        } else if (type === 'terms') {
            title = "Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…";
            content = `<h1>Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h1>
<p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ${siteName}. Ø¨Ø§Ø³ØªØ®Ø§Ø¯Ù…Ùƒ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„ØªØ§Ù„ÙŠØ©...</p>`;
        } else {
            title = "Ø§ØªØµÙ„ Ø¨Ù†Ø§";
            content = `<p>Ù„Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ø£Ùˆ ØªØ¬Ø§Ø±ÙŠØ©ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</p><h3>${email}</h3>`;
        }

        document.getElementById("legal-title").innerText = title;
        document.getElementById("legal-content").value = content;
    }

    function copyLegal() {
        document.getElementById("legal-content").select();
        document.execCommand("copy");
        alert("ØªÙ… Ù†Ø³Ø® ÙƒÙˆØ¯ Ø§Ù„ØµÙØ­Ø©! Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ ØµÙØ­Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ø¨Ù„ÙˆØ¬Ø± ÙˆØ§Ù„ØµÙ‚Ù‡.");
    }

    function showSection(sec) {
        if(sec === 'writer') {
            document.getElementById("writer-section").style.display = "block";
            document.getElementById("legal-display").style.display = "none";
        }
    }

    // --- Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø¢Ù…Ù† (AdSense Safe) ---
    async function generateSafeContent() {
        const topic = document.getElementById("topic").value;
        if(!topic) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†");
        
        const btn = document.querySelector(".btn-primary");
        btn.innerText = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯...";
        
        const key = localStorage.getItem("akey");
        const prompt = `Ø§ÙƒØªØ¨ Ù…Ù‚Ø§Ù„Ø§Ù‹ Ø·ÙˆÙŠÙ„Ø§Ù‹ ÙˆÙ…ÙØµÙ„Ø§Ù‹ ÙˆØ­ØµØ±ÙŠØ§Ù‹ Ù„Ù„Ù…Ø¯ÙˆÙ†Ø© Ø¹Ù†: "${topic}".
        Ù‚Ù… Ø¨ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¥Ù„Ù‰ ÙÙ‚Ø±Ø§Øª Ù…Ø¹ Ø¹Ù†Ø§ÙˆÙŠÙ† ÙØ±Ø¹ÙŠØ©.
        Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ Ø¨Ø´Ø±ÙŠØ§Ù‹ ÙˆØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±.
        Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹: Ø§ÙƒØªØ¨ Ø¨ØªÙ†Ø³ÙŠÙ‚ Ù†ØµÙŠ Ø¹Ø§Ø¯ÙŠ (Ù„ÙŠØ³ HTML) Ù„ÙƒÙŠ Ø£Ø³ØªØ·ÙŠØ¹ ØªØ¹Ø¯ÙŠÙ„Ù‡.`;

        try {
            const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${key}`, {
                method: "POST", headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });
            const data = await res.json();
            
            document.getElementById("editor-card").style.display = "block";
            document.getElementById("final-title").value = topic;
            document.getElementById("final-content").value = data.candidates[0].content.parts[0].text;
            
            btn.innerText = "âœ¨ ØªÙˆÙ„ÙŠØ¯ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰";
            window.scrollTo(0, document.body.scrollHeight);

        } catch(e) { alert("Error: " + e.message); }
    }

    // --- Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ---
    async function publishToBlogger() {
        if(!token) return authenticate();
        
        const title = document.getElementById("final-title").value;
        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ù„Ù‰ ÙÙ‚Ø±Ø§Øª HTML Ù„Ù„Ù†Ø´Ø±
        const rawContent = document.getElementById("final-content").value;
        const htmlContent = rawContent.split('\n').map(p => p.trim() ? `<p>${p}</p>` : "").join("");
        
        const blogId = localStorage.getItem("blogId");
        
        const body = {
            kind: "blogger#post", blog: { id: blogId },
            title: title, content: htmlContent
        };

        try {
            const res = await fetch(`https://www.googleapis.com/blogger/v3/blogs/${blogId}/posts/`, {
                method: "POST",
                headers: { "Authorization": `Bearer ${token}`, "Content-Type": "application/json" },
                body: JSON.stringify(body)
            });
            if(res.ok) alert("âœ… ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­!");
            else throw new Error("ÙØ´Ù„ Ø§Ù„Ù†Ø´Ø±");
        } catch(e) { alert("Ø®Ø·Ø£: " + e.message); }
    }
</script>

</body>
</html>
