<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¢Ù„Ø© Ù†Ø´Ø± Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨ Ø§Ù„Ø¢Ù„ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js"></script>
</head>
<body class="bg-gray-900 text-white font-sans p-5">

    <div class="max-w-4xl mx-auto bg-gray-800 rounded-xl shadow-2xl p-8 border border-gray-700">
        <h1 class="text-3xl font-bold text-center mb-8 text-red-500">Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ø´Ø± Ø§Ù„ÙÙˆØ±ÙŠ Ù„Ù„ÙŠÙˆØªÙŠÙˆØ¨</h1>

        <div class="bg-gray-700 p-6 rounded-lg mb-8 border-r-4 border-yellow-500">
            <h2 class="text-xl font-semibold mb-4 text-yellow-500">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø±Ø¨Ø· (Ø§Ù„Ù…ÙØ§ØªÙŠØ­)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input id="api_key" type="password" placeholder="API Key (AIza...)" class="p-3 bg-gray-600 rounded border border-gray-500 focus:outline-none focus:border-red-500">
                <input id="client_id" type="password" placeholder="Client ID (.apps.googleusercontent.com)" class="p-3 bg-gray-600 rounded border border-gray-500 focus:outline-none focus:border-red-500">
                <input id="client_secret" type="password" placeholder="Client Secret (GOCSPX-...)" class="p-3 bg-gray-600 rounded border border-gray-500 focus:outline-none focus:border-red-500">
            </div>
            <p class="text-xs text-gray-400 mt-2">* ÙŠØªÙ… ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙŠ Ù…ØªØµÙØ­Ùƒ ÙÙ‚Ø· Ù„Ù„Ø£Ù…Ø§Ù†.</p>
        </div>

        <div class="space-y-6">
            <h2 class="text-xl font-semibold text-blue-400">ğŸ¥ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</h2>
            <input id="video_title" type="text" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ" class="w-full p-4 bg-gray-700 rounded-lg focus:ring-2 focus:ring-red-500 outline-none">
            <textarea id="video_desc" placeholder="ÙˆØµÙ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ" class="w-full p-4 bg-gray-700 rounded-lg h-32 outline-none"></textarea>
            
            <div class="border-2 border-dashed border-gray-600 p-10 text-center rounded-lg hover:border-red-500 transition-colors">
                <input type="file" id="video_file" accept="video/*" class="hidden">
                <label for="video_file" class="cursor-pointer text-gray-400">
                    <span class="text-4xl block mb-2">ğŸ“</span>
                    Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø±Ø§Ø¯ Ù†Ø´Ø±Ù‡
                </label>
            </div>

            <button onclick="handleAuthClick()" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 rounded-xl text-lg shadow-lg transform transition active:scale-95">
                ğŸš€ Ù†Ø´Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙˆØ±Ø§Ù‹ Ø¹Ù„Ù‰ ÙŠÙˆØªÙŠÙˆØ¨
            </button>
        </div>

        <div id="status" class="mt-6 p-4 rounded text-center hidden"></div>
    </div>

    <script>
        let tokenClient;
        let accessToken = null;

        // 1. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
        function initClient() {
            const clientId = document.getElementById('client_id').value;
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: clientId,
                scope: 'https://www.googleapis.com/auth/youtube.upload',
                callback: (response) => {
                    if (response.access_token) {
                        accessToken = response.access_token;
                        startUpload();
                    }
                },
            });
        }

        // 2. Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
        function handleAuthClick() {
            if (!document.getElementById('client_id').value || !document.getElementById('client_secret').value) {
                alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒØ§ÙØ© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£ÙˆÙ„Ø§Ù‹!");
                return;
            }
            initClient();
            tokenClient.requestAccessToken();
        }

        // 3. Ø¯Ø§Ù„Ø© Ø§Ù„Ø±ÙØ¹ Ø§Ù„ÙØ¹Ù„ÙŠØ©
        async function startUpload() {
            const statusDiv = document.getElementById('status');
            const file = document.getElementById('video_file').files[0];
            const title = document.getElementById('video_title').value;
            const desc = document.getElementById('video_desc').value;

            if (!file) { alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ÙÙŠØ¯ÙŠÙˆ!"); return; }

            statusDiv.className = "mt-6 p-4 rounded text-center bg-blue-600";
            statusDiv.innerHTML = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹... ÙŠØ±Ø¬Ù‰ Ø¹Ø¯Ù… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©";
            statusDiv.classList.remove('hidden');

            const metadata = {
                snippet: { title: title, description: desc },
                status: { privacyStatus: 'public' }
            };

            const formData = new FormData();
            formData.append('metadata', new Blob([JSON.stringify(metadata)], { type: 'application/json' }));
            formData.append('file', file);

            try {
                const response = await fetch('https://www.googleapis.com/upload/youtube/v3/videos?uploadType=multipart&part=snippet,status', {
                    method: 'POST',
                    headers: new Headers({ 'Authorization': 'Bearer ' + accessToken }),
                    body: formData
                });

                const result = await response.json();
                if (result.id) {
                    statusDiv.className = "mt-6 p-4 rounded text-center bg-green-600";
                    statusDiv.innerHTML = `âœ… ØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¨Ù†Ø¬Ø§Ø­! Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ: https://youtu.be/${result.id}`;
                } else {
                    throw new Error(result.error.message);
                }
            } catch (error) {
                statusDiv.className = "mt-6 p-4 rounded text-center bg-red-600";
                statusDiv.innerHTML = "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±ÙØ¹: " + error.message;
            }
        }
    </script>
</body>
</html>
