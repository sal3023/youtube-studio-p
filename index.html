<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.M Studio - Ø§Ù„Ù…Ø·ÙˆØ±</title>
    <style>
        :root { --main-color: #007bff; --bg-color: #121212; --panel-bg: #1e1e1e; --text-color: #e0e0e0; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg-color); color: var(--text-color); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* Ø§Ù„Ø±Ø£Ø³ */
        header { background: #000; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--main-color); }
        h1 { margin: 0; font-size: 1.1rem; color: #fff; }
        .settings-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #fff; }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
        #vaultModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1000; justify-content: center; align-items: center; }
        .vault-box { background: #222; padding: 25px; border-radius: 10px; width: 85%; border: 2px solid var(--main-color); text-align: center; }
        .vault-input, .vault-select { width: 90%; padding: 10px; background: #333; color: #fff; border: 1px solid #555; border-radius: 5px; margin: 10px 0; font-size: 14px; }
        
        /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… */
        .nav-tabs { display: flex; justify-content: space-around; background: #222; padding: 5px; }
        .nav-btn { background: none; border: none; color: #888; padding: 10px; font-weight: bold; cursor: pointer; flex: 1; border-bottom: 3px solid transparent; }
        .nav-btn.active { color: var(--main-color); border-bottom-color: var(--main-color); }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .content-area { flex: 1; overflow-y: auto; padding: 20px; display: none; }
        .content-area.active { display: block; animation: fadeIn 0.5s; }
        .card { background: var(--panel-bg); padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #333; }
        input, select { width: 100%; padding: 12px; margin-bottom: 10px; background: #2c2c2c; border: 1px solid #444; color: white; border-radius: 5px; box-sizing: border-box; }
        button.action-btn { width: 100%; padding: 15px; background: var(--main-color); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .result-box { background: #252525; padding: 15px; border-radius: 5px; margin-top: 15px; border-left: 4px solid var(--main-color); white-space: pre-wrap; line-height: 1.6; min-height: 50px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="vaultModal">
        <div class="vault-box">
            <h3>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
            
            <label style="display:block; text-align:right; font-size:0.9rem; color:#aaa;">1. Ù…ÙØªØ§Ø­ API:</label>
            <input type="password" id="apiKeyInput" class="vault-input" placeholder="AIzaSy...">
            
            <label style="display:block; text-align:right; font-size:0.9rem; color:#aaa;">2. Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ (Ø¬Ø±Ø¨ ØªØºÙŠÙŠØ± Ù‡Ø°Ø§ Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¹Ù…Ù„):</label>
            <select id="modelSelect" class="vault-select">
                <option value="gemini-1.5-flash">Gemini 1.5 Flash (Ø³Ø±ÙŠØ¹)</option>
                <option value="gemini-1.5-pro">Gemini 1.5 Pro (Ø°ÙƒÙŠ Ø¬Ø¯Ø§Ù‹)</option>
                <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash (Ø¬Ø¯ÙŠØ¯)</option>
                <option value="gemini-1.0-pro">Gemini 1.0 Pro (Ù‚Ø¯ÙŠÙ… ÙˆÙ…Ø³ØªÙ‚Ø±)</option>
            </select>

            <button class="action-btn" onclick="saveSettings()">Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
            <button onclick="closeVault()" style="background:none; border:none; color:#f00; margin-top:10px;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <header>
        <h1>S.M Studio Pro</h1>
        <button class="settings-btn" onclick="openVault()">âš™ï¸</button>
    </header>

    <div class="nav-tabs">
        <button class="nav-btn active" onclick="showTab('blog')">Ù…Ù‚Ø§Ù„</button>
        <button class="nav-btn" onclick="showTab('trend')">ØªØ±Ù†Ø¯</button>
        <button class="nav-btn" onclick="showTab('ads')">Ø¥Ø¹Ù„Ø§Ù†</button>
        <button class="nav-btn" onclick="showTab('chat')">Ø´Ø§Øª</button>
    </div>

    <div id="blog" class="content-area active">
        <div class="card">
            <input type="text" id="blogTopic" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„...">
            <button class="action-btn" onclick="generateBlog()">âœï¸ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù‚Ø§Ù„</button>
            <div id="blogResult" class="result-box">Ø§Ù„Ù†ØªÙŠØ¬Ø©...</div>
        </div>
    </div>

    <div id="trend" class="content-area">
        <div class="card">
            <input type="text" id="trendTopic" placeholder="Ø§Ù„Ù…Ø¬Ø§Ù„ (Ù…Ø«Ù„: Ø§Ù„ØªØ¬Ø§Ø±Ø©)...">
            <button class="action-btn" onclick="analyzeTrend()">ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ±Ù†Ø¯</button>
            <div id="trendResult" class="result-box">Ø§Ù„Ù†ØªÙŠØ¬Ø©...</div>
        </div>
    </div>

    <div id="ads" class="content-area">
        <div class="card">
            <input type="text" id="adProduct" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬...">
            <button class="action-btn" onclick="generateAd()">ğŸ“¢ Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø¹Ù„Ø§Ù†</button>
            <div id="adResult" class="result-box">Ø§Ù„Ù†ØªÙŠØ¬Ø©...</div>
        </div>
    </div>

    <div id="chat" class="content-area">
        <div class="card">
            <div id="chatBox" class="result-box" style="height: 300px; overflow-y: scroll; margin-bottom: 10px;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ.</div>
            <div style="display: flex; gap: 5px;">
                <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨..." style="margin: 0;">
                <button class="action-btn" style="width: 80px;" onclick="sendChat()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <script>
        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function getApiKey() { return localStorage.getItem("my_secret_key"); }
        function getModel() { return localStorage.getItem("my_model") || "gemini-1.5-flash"; }
        
        function openVault() { 
            document.getElementById('vaultModal').style.display = 'flex'; 
            if(getApiKey()) document.getElementById('apiKeyInput').value = getApiKey();
            document.getElementById('modelSelect').value = getModel();
        }
        
        function closeVault() { document.getElementById('vaultModal').style.display = 'none'; }
        
        function saveSettings() {
            const key = document.getElementById('apiKeyInput').value.trim();
            const model = document.getElementById('modelSelect').value;
            
            if(key.length > 10) { 
                localStorage.setItem("my_secret_key", key); 
                localStorage.setItem("my_model", model);
                alert("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸! Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ: " + model); 
                closeVault(); 
            } else { 
                alert("âŒ Ø§Ù„Ù…ÙØªØ§Ø­ ÙŠØ¨Ø¯Ùˆ ØºÙŠØ± ØµØ­ÙŠØ­"); 
            }
        }

        window.onload = function() { 
            if(!getApiKey()) setTimeout(openVault, 1000); 
        };

        function showTab(tabId) {
            document.querySelectorAll('.content-area').forEach(div => div.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        async function callGemini(prompt, resultElementId) {
            const resultBox = document.getElementById(resultElementId);
            const key = getApiKey();
            const model = getModel();

            if (!key) { openVault(); return; }

            resultBox.innerText = `â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ${model}...`;

            try {
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… v1beta ÙˆÙ‡Ùˆ Ø§Ù„Ø£ÙƒØ«Ø± ØªÙˆØ§ÙÙ‚Ø§Ù‹ Ø­Ø§Ù„ÙŠØ§Ù‹
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${key}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                const data = await response.json();
                
                if (data.error) {
                    resultBox.innerText = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ (${model}):\n` + data.error.message + "\n\nğŸ’¡ Ø§Ù„Ø­Ù„: Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ø³ âš™ï¸ ÙˆØ§Ø®ØªØ± Ù…ÙˆØ¯ÙŠÙ„Ø§Ù‹ Ø¢Ø®Ø± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©.";
                } else {
                    resultBox.innerHTML = data.candidates[0].content.parts[0].text.replace(/\n/g, '<br>');
                }
            } catch (error) {
                resultBox.innerText = "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„! ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.";
            }
        }

        function generateBlog() {
            const topic = document.getElementById('blogTopic').value;
            if(topic) callGemini(`Ø§ÙƒØªØ¨ Ù…Ù‚Ø§Ù„Ø§Ù‹ Ø·ÙˆÙŠÙ„Ø§Ù‹ (SEO) Ø¹Ù†: ${topic}`, 'blogResult');
        }

        function analyzeTrend() {
            const topic = document.getElementById('trendTopic').value;
            if(topic) callGemini(`Ø£Ø¹Ø·Ù†ÙŠ ØªØ­Ù„ÙŠÙ„ ØªØ±Ù†Ø¯ ÙˆØ£ÙÙƒØ§Ø± ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø¹Ù†: ${topic}`, 'trendResult');
        }

        function generateAd() {
            const product = document.getElementById('adProduct').value;
            if(product) callGemini(`Ø§ÙƒØªØ¨ Ø¥Ø¹Ù„Ø§Ù†Ø§Ù‹ ØªØ³ÙˆÙŠÙ‚ÙŠØ§Ù‹ Ø¬Ø°Ø§Ø¨Ø§Ù‹ Ù„Ù…Ù†ØªØ¬: ${product}`, 'adResult');
        }

        async function sendChat() {
            const input = document.getElementById('chatInput');
            const text = input.value;
            if (!text) return;
            const chatBox = document.getElementById('chatBox');
            chatBox.innerHTML += `<br><b>Ø£Ù†Øª:</b> ${text}`;
            input.value = '';
            
            const key = getApiKey();
            const model = getModel();
            if(!key) { openVault(); return; }

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${key}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ contents: [{ parts: [{ text: text }] }] })
                });
                const data = await response.json();
                
                if(data.error) {
                    chatBox.innerHTML += `<br><b style="color:red">Ø®Ø·Ø£: ${data.error.message}</b><br>ØºÙŠØ± Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª âš™ï¸`;
                } else {
                    const aiReply = data.candidates[0].content.parts[0].text;
                    chatBox.innerHTML += `<br><b>Bot:</b> ${aiReply}<hr>`;
                    chatBox.scrollTop = chatBox.scrollHeight;
                }
            } catch (e) {
                chatBox.innerHTML += `<br><b style="color:red">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</b>`;
            }
        }
    </script>
</body>
</html>
