<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Pro - Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,sans-serif}
        body{background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
        .container{width:100%;max-width:900px;background:#fff;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.3);overflow:hidden}
        .header{background:linear-gradient(90deg,#667eea,#764ba2);color:#fff;padding:30px;text-align:center}
        .header h1{font-size:2.5em;margin-bottom:10px}
        .chat-box{height:500px;display:flex;flex-direction:column}
        .messages{flex:1;padding:20px;overflow-y:auto;background:#f8f9fa}
        .message{max-width:80%;padding:15px 20px;margin-bottom:15px;border-radius:20px;animation:fadeIn 0.3s;line-height:1.6;word-wrap:break-word}
        .user{background:#667eea;color:#fff;margin-left:auto;border-bottom-right-radius:5px}
        .bot{background:#fff;border:1px solid #ddd;margin-right:auto;border-bottom-left-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,0.1)}
        .input-area{padding:20px;background:#fff;border-top:1px solid #eee;display:flex;gap:10px}
        input{flex:1;padding:15px;border:2px solid #e0e0e0;border-radius:30px;outline:none;font-size:16px}
        input:focus{border-color:#667eea}
        button{background:#667eea;color:#fff;border:none;padding:15px 30px;border-radius:30px;cursor:pointer;font-size:16px;transition:0.3s}
        button:hover{background:#764ba2;transform:translateY(-2px)}
        .typing{display:none;padding:15px;color:#666;font-style:italic}
        .status{position:fixed;top:20px;right:20px;background:#4caf50;color:#fff;padding:10px 20px;border-radius:30px;font-size:14px;box-shadow:0 2px 10px rgba(0,0,0,0.2)}
        @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        .login-page{padding:60px 20px;text-align:center}
        .login-page input{width:100%;max-width:400px;padding:15px;margin:20px 0;border:2px solid #ddd;border-radius:30px;font-size:18px;text-align:center}
        .features{display:flex;justify-content:center;gap:20px;margin-top:30px;flex-wrap:wrap}
        .feature{background:rgba(102,126,234,0.1);padding:15px 25px;border-radius:15px}
        .hidden{display:none!important}
    </style>
</head>
<body>

<div class="status">ğŸŸ¢ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ 24/7</div>

<div class="container">
    <!-- ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginPage" class="login-page">
        <div class="header" style="margin:-60px -20px 40px -20px">
            <h1>ğŸ¤– Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h1>
            <p>Ù†Ø¸Ø§Ù… AI Ù…ØªÙƒØ§Ù…Ù„ ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­</p>
        </div>
        <input type="text" id="userName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù„Ù„Ø¨Ø¯Ø¡...">
        <br>
        <button onclick="startChat()" style="font-size:20px;padding:15px 50px">Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù…</button>
        
        <div class="features">
            <div class="feature">âš¡ Ù„Ø§ ÙŠÙ†Ø§Ù… Ø£Ø¨Ø¯Ø§Ù‹</div>
            <div class="feature">ğŸ”’ ÙŠØ¹Ù…Ù„ Ù…Ø­Ù„ÙŠØ§Ù‹</div>
            <div class="feature">ğŸŒ Ø¨Ø¯ÙˆÙ† Ø®Ø§Ø¯Ù…</div>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
    <div id="chatPage" class="chat-box hidden">
        <div class="header" style="display:flex;justify-content:space-between;align-items:center">
            <div>
                <h2 style="font-size:1.3em">Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø°ÙƒÙŠØ©</h2>
                <small>Ù…Ø±Ø­Ø¨Ø§Ù‹: <span id="displayName">Ø²Ø§Ø¦Ø±</span></small>
            </div>
            <button onclick="location.reload()" style="background:rgba(255,255,255,0.2);padding:8px 20px;font-size:14px">Ø®Ø±ÙˆØ¬</button>
        </div>
        
        <div class="messages" id="messages"></div>
        
        <div class="typing" id="typing">
            Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø©<span style="animation:fadeIn 0.5s infinite">...</span>
        </div>
        
        <div class="input-area">
            <input type="text" id="msgInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." onkeypress="if(event.key==='Enter')send()">
            <button onclick="send()">Ø¥Ø±Ø³Ø§Ù„ â¤</button>
        </div>
    </div>
</div>

<!-- Ù…ÙƒØªØ¨Ø© WebLLM Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…Ø­Ù„ÙŠ -->
<script type="module">
    import * as webllm from 'https://esm.run/@mlc-ai/web-llm';

    let engine = null;
    let user = localStorage.getItem('ai_user');
    
    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ØŒ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
    if(user){
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('chatPage').classList.remove('hidden');
        document.getElementById('displayName').textContent = user;
        initAI();
    }

    window.startChat = function(){
        const name = document.getElementById('userName').value.trim();
        if(!name) return alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…');
        
        localStorage.setItem('ai_user', name);
        user = name;
        
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('chatPage').classList.remove('hidden');
        document.getElementById('displayName').textContent = name;
        
        initAI();
    };

    async function initAI(){
        addMsg('bot', 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ... (Ù‚Ø¯ ØªØ³ØªØºØ±Ù‚ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ 30-60 Ø«Ø§Ù†ÙŠØ©)');
        
        try{
            // ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ ØµØºÙŠØ± ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
            engine = await webllm.CreateMLCEngine(
                "Llama-3.2-1B-Instruct-q4f16_1-MLC",
                {
                    initProgressCallback: (progress) => {
                        if(progress.progress === 1){
                            addMsg('bot', `âœ… Ù…Ø±Ø­Ø¨Ø§Ù‹ ${user}! Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©. Ø§Ø³Ø£Ù„Ù†ÙŠ Ø£ÙŠ Ø´ÙŠØ¡.`);
                        }
                    }
                }
            );
        }catch(e){
            addMsg('bot', 'âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ AI. Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ...');
            window.useBackupMode = true;
        }
    }

    window.send = async function(){
        const input = document.getElementById('msgInput');
        const text = input.value.trim();
        if(!text) return;
        
        addMsg('user', text);
        input.value = '';
        document.getElementById('typing').style.display = 'block';
        
        try{
            let reply = '';
            
            if(window.useBackupMode || !engine){
                // ÙˆØ¶Ø¹ Ø§Ø­ØªÙŠØ§Ø·ÙŠ: Ù…Ø­Ø§ÙƒØ§Ø© Ø°ÙƒÙŠØ©
                reply = getSmartReply(text);
            }else{
                // AI Ø­Ù‚ÙŠÙ‚ÙŠ
                const messages = [
                    {role: 'system', content: 'Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©. Ø£Ø¬Ø¨ Ø¨Ø¥Ø¬Ø§Ø¨Ø§Øª Ù‚ØµÙŠØ±Ø© ÙˆÙ…ÙÙŠØ¯Ø©.'},
                    {role: 'user', content: text}
                ];
                
                const response = await engine.chat.completions.create({messages});
                reply = response.choices[0].message.content;
            }
            
            setTimeout(() => {
                document.getElementById('typing').style.display = 'none';
                addMsg('bot', reply);
            }, 500);
            
        }catch(error){
            document.getElementById('typing').style.display = 'none';
            addMsg('bot', getSmartReply(text));
        }
    };

    function addMsg(who, text){
        const div = document.createElement('div');
        div.className = `message ${who}`;
        div.textContent = text;
        document.getElementById('messages').appendChild(div);
        document.getElementById('messages').scrollTop = 99999;
    }

    // Ø±Ø¯ÙˆØ¯ Ø°ÙƒÙŠØ© Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
    function getSmartReply(input){
        input = input.toLowerCase();
        const replies = {
            'Ù…Ø±Ø­Ø¨Ø§': 'Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹! ğŸ‘‹ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ',
            'ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ': 'Ø£Ù†Ø§ Ø¨Ø®ÙŠØ±ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ! Ø£Ù†Øª ÙƒÙŠÙ Ø­Ø§Ù„ÙƒØŸ',
            'Ù…Ù† Ø§Ù†Øª': 'Ø£Ù†Ø§ Ù†Ø¸Ø§Ù… Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ¹Ù…Ù„ ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ø¨Ø¯ÙˆÙ† Ø®ÙˆØ§Ø¯Ù… Ø®Ø§Ø±Ø¬ÙŠØ©! ğŸ¤–',
            'Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ§Ø±ÙŠØ®': `Ø§Ù„ÙŠÙˆÙ… Ù‡Ùˆ ${new Date().toLocaleDateString('ar-SA')}`,
            'Ù…Ø§ Ø§Ù„ÙˆÙ‚Øª': `Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ø¢Ù† ${new Date().toLocaleTimeString('ar-SA')}`,
            'Ø´ÙƒØ±Ø§': 'Ø§Ù„Ø¹ÙÙˆ! ğŸŒŸ Ø³Ø¹ÙŠØ¯ Ø¨Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ',
            'bye': 'Ø¥Ù„Ù‰ Ø§Ù„Ù„Ù‚Ø§Ø¡! ğŸ‘‹',
            'help': 'ÙŠÙ…ÙƒÙ†Ù†ÙŠ: Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©ØŒ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©ØŒ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø©. Ù…Ø§ ØªØ­ØªØ§Ø¬ØŸ'
        };
        
        for(let key in replies){
            if(input.includes(key)) return replies[key];
        }
        
        const defaults = [
            'ÙÙ‡Ù…Øª Ø³Ø¤Ø§Ù„Ùƒ. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ¶ÙŠØ­ Ø£ÙƒØ«Ø±ØŸ',
            'Ù‡Ø°Ø§ Ø³Ø¤Ø§Ù„ Ù…Ø«ÙŠØ± Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù…! ğŸ¤”',
            'Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©ØŒ ØªÙØ¶Ù„ Ø¨Ø§Ù„Ø³Ø¤Ø§Ù„ Ø£ÙƒØ«Ø±',
            'ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø¤Ø§Ù„ÙŠ Ø¹Ù† Ø£ÙŠ Ù…ÙˆØ¶ÙˆØ¹ØŒ Ø£Ù†Ø§ Ø£ØªØ¹Ù„Ù… Ù…Ù†Ùƒ!'
        ];
        
        return defaults[Math.floor(Math.random() * defaults.length)];
    }
</script>

</body>
</html>
