<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.M Studio - Ø§Ù„Ù…Ø·ÙˆØ±</title>
    <style>
        :root { --main-color: #007bff; --bg-color: #121212; --panel-bg: #1e1e1e; --text-color: #e0e0e0; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg-color); color: var(--text-color); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* Ø§Ù„Ø±Ø£Ø³ */
        header { background: #000; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--main-color); }
        h1 { margin: 0; font-size: 1.1rem; color: #fff; }
        .settings-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #fff; }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø®Ø²Ù†Ø© */
        #vaultModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center; }
        .vault-box { background: #222; padding: 25px; border-radius: 10px; width: 85%; border: 2px solid var(--main-color); text-align: center; }
        .vault-input { width: 90%; padding: 10px; background: #333; color: #0f0; border: 1px solid #555; border-radius: 5px; margin: 15px 0; }
        
        /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… */
        .nav-tabs { display: flex; justify-content: space-around; background: #222; padding: 5px; }
        .nav-btn { background: none; border: none; color: #888; padding: 10px; font-weight: bold; cursor: pointer; flex: 1; border-bottom: 3px solid transparent; }
        .nav-btn.active { color: var(--main-color); border-bottom-color: var(--main-color); }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .content-area { flex: 1; overflow-y: auto; padding: 20px; display: none; }
        .content-area.active { display: block; animation: fadeIn 0.5s; }
        .card { background: var(--panel-bg); padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #333; }
        input, select { width: 100%; padding: 12px; margin-bottom: 10px; background: #2c2c2c; border: 1px solid #444; color: white; border-radius: 5px; box-sizing: border-box; }
        button.action-btn { width: 100%; padding: 15px; background: var(--main-color); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .result-box { background: #252525; padding: 15px; border-radius: 5px; margin-top: 15px; border-left: 4px solid var(--main-color); white-space: pre-wrap; line-height: 1.6; min-height: 50px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="vaultModal">
        <div class="vault-box">
            <h3>ğŸ” Ø¶Ø¨Ø· Ø§Ù„Ù…ÙØªØ§Ø­</h3>
            <p style="color:#aaa; font-size:0.9rem;">Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ API Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ù‡Ù†Ø§:</p>
            <input type="password" id="apiKeyInput" class="vault-input" placeholder="AIzaSy...">
            <button class="action-btn" onclick="saveKey()">Ø­ÙØ¸ ÙˆØªØ´ØºÙŠÙ„</button>
            <button onclick="closeVault()" style="background:none; border:none; color:#f00; margin-top:10px;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <header>
        <h1>S.M Studio Pro</h1>
        <button class="settings-btn" onclick="openVault()">âš™ï¸</button>
    </header>

    <div class="nav-tabs">
        <button class="nav-btn active" onclick="showTab('blog')">Ù…Ù‚Ø§Ù„</button>
        <button class="nav-btn" onclick="showTab('trend')">ØªØ±Ù†Ø¯</button>
        <button class="nav-btn" onclick="showTab('ads')">Ø¥Ø¹Ù„Ø§Ù†</button>
        <button class="nav-btn" onclick="showTab('chat')">Ø´Ø§Øª</button>
    </div>

    <div id="blog" class="content-area active">
        <div class="card">
            <input type="text" id="blogTopic" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„...">
            <button class="action-btn" onclick="generateBlog()">âœï¸ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù‚Ø§Ù„</button>
            <div id="blogResult" class="result-box">Ø§Ù„Ù†ØªÙŠØ¬Ø©...</div>
        </div>
    </div>

    <div id="trend" class="content-area">
        <div class="card">
            <input type="text" id="trendTopic" placeholder="Ø§Ù„Ù…Ø¬Ø§Ù„ (Ù…Ø«Ù„: Ø§Ù„ØªØ¬Ø§Ø±Ø©)...">
            <button class="action-btn" onclick="analyzeTrend()">ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªØ±Ù†Ø¯</button>
            <div id="trendResult" class="result-box">Ø§Ù„Ù†ØªÙŠØ¬Ø©...</div>
        </div>
    </div>

    <div id="ads" class="content-area">
        <div class="card">
            <input type="text" id="adProduct" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬...">
            <button class="action-btn" onclick="generateAd()">ğŸ“¢ Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø¹Ù„Ø§Ù†</button>
            <div id="adResult" class="result-box">Ø§Ù„Ù†ØªÙŠØ¬Ø©...</div>
        </div>
    </div>

    <div id="chat" class="content-area">
        <div class="card">
            <div id="chatBox" class="result-box" style="height: 300px; overflow-y: scroll; margin-bottom: 10px;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ.</div>
            <div style="display: flex; gap: 5px;">
                <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨..." style="margin: 0;">
                <button class="action-btn" style="width: 80px;" onclick="sendChat()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <script>
        function getApiKey() { return localStorage.getItem("my_secret_key"); }
        function openVault() { document.getElementById('vaultModal').style.display = 'flex'; if(getApiKey()) document.getElementById('apiKeyInput').value = getApiKey(); }
        function closeVault() { document.getElementById('vaultModal').style.display = 'none'; }
        function saveKey() {
            const key = document.getElementById('apiKeyInput').value.trim();
            if(key.length > 10) { localStorage.setItem("my_secret_key", key); alert("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸!"); closeVault(); } 
            else { alert("âŒ Ø§Ù„Ù…ÙØªØ§Ø­ Ø®Ø·Ø£"); }
        }

        window.onload = function() { if(!getApiKey()) setTimeout(openVault, 1000); };

        function showTab(tabId) {
            document.querySelectorAll('.content-area').forEach(div => div.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // ğŸŸ¢ğŸŸ¢ Ù‡Ù†Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ø·Ø£ ÙˆØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Gemini Pro Ø§Ù„Ù…Ø³ØªÙ‚Ø± ğŸŸ¢ğŸŸ¢
        async function callGemini(prompt, resultElementId) {
            const resultBox = document.getElementById(resultElementId);
            const key = getApiKey();
            if (!key) { openVault(); return; }

            resultBox.innerText = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...";

            try {
                // âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… gemini-pro Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† flash
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${key}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                const data = await response.json();
                
                if (data.error) {
                    resultBox.innerText = "âŒ Ø®Ø·Ø£ Ù…Ù† Ø¬ÙˆØ¬Ù„: " + data.error.message;
                } else {
                    resultBox.innerHTML = data.candidates[0].content.parts[0].text.replace(/\n/g, '<br>');
                }
            } catch (error) {
                resultBox.innerText = "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„!";
            }
        }

        function generateBlog() {
            const topic = document.getElementById('blogTopic').value;
            if(topic) callGemini(`Ø§ÙƒØªØ¨ Ù…Ù‚Ø§Ù„Ø§Ù‹ Ø·ÙˆÙŠÙ„Ø§Ù‹ ÙˆÙ…Ù†Ø³Ù‚Ø§Ù‹ (SEO) Ø¹Ù†: ${topic}`, 'blogResult');
        }

        function analyzeTrend() {
            const topic = document.getElementById('trendTopic').value;
            if(topic) callGemini(`Ø£Ø¹Ø·Ù†ÙŠ ØªØ­Ù„ÙŠÙ„ ØªØ±Ù†Ø¯ ÙˆØ£ÙÙƒØ§Ø± ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø¹Ù†: ${topic}`, 'trendResult');
        }

        function generateAd() {
            const product = document.getElementById('adProduct').value;
            if(product) callGemini(`Ø§ÙƒØªØ¨ Ø¥Ø¹Ù„Ø§Ù†Ø§Ù‹ ØªØ³ÙˆÙŠÙ‚ÙŠØ§Ù‹ Ø¬Ø°Ø§Ø¨Ø§Ù‹ Ù„Ù…Ù†ØªØ¬: ${product}`, 'adResult');
        }

        async function sendChat() {
            const input = document.getElementById('chatInput');
            const text = input.value;
            if (!text) return;
            const chatBox = document.getElementById('chatBox');
            chatBox.innerHTML += `<br><b>Ø£Ù†Øª:</b> ${text}`;
            input.value = '';
            
            const key = getApiKey();
            if(!key) { openVault(); return; }

            try {
                // âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… gemini-pro Ù‡Ù†Ø§ Ø£ÙŠØ¶Ø§Ù‹
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${key}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ contents: [{ parts: [{ text: text }] }] })
                });
                const data = await response.json();
                const aiReply = data.candidates[0].content.parts[0].text;
                chatBox.innerHTML += `<br><b>Bot:</b> ${aiReply}<hr>`;
                chatBox.scrollTop = chatBox.scrollHeight;
            } catch (e) {
                chatBox.innerHTML += `<br><b style="color:red">Ø®Ø·Ø£</b>`;
            }
        }
    </script>
</body>
</html>
